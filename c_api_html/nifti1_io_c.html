<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>nifti1_io.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.4 on Mon Dec 13 17:43:44 2004 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>nifti1_io.c File Reference</h1>Main collection of nifti1 i/o routines, written by Bob Cox, SSCC NIMH; revised by Mark Jenkinson, FMRIB. 
<a href="#_details">More...</a>
<p>
<code>#include "<a class="el" href="nifti1_io_h-source.html">nifti1_io.h</a>"</code><br>
<code>#include &lt;sys/types.h&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Compounds</h2></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><b>eightbytes</b></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><b>fourbytes</b></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><b>sixteenbytes</b></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><b>twobytes</b></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a1">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a2">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a3">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a4">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a5">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a6">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a7">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a8">ERREX</a>(msg)</td></tr>
<tr><td nowrap align=right valign=top><a name="a9" doxytag="nifti1_io.c::CR"></a>
#define&nbsp;</td><td valign=bottom><b>CR</b>&nbsp;&nbsp;&nbsp;0x0D</td></tr>
<tr><td nowrap align=right valign=top><a name="a10" doxytag="nifti1_io.c::LF"></a>
#define&nbsp;</td><td valign=bottom><b>LF</b>&nbsp;&nbsp;&nbsp;0x0A</td></tr>
<tr><td nowrap align=right valign=top><a name="a11" doxytag="nifti1_io.c::QQNUM"></a>
#define&nbsp;</td><td valign=bottom><b>QQNUM</b>(n1,n2)&nbsp;&nbsp;&nbsp;if( strcmp(lhs,#n1)==0 ) nim-&gt;n2=strtod(rhs,NULL)</td></tr>
<tr><td nowrap align=right valign=top><a name="a12" doxytag="nifti1_io.c::QNUM"></a>
#define&nbsp;</td><td valign=bottom><b>QNUM</b>(nam)&nbsp;&nbsp;&nbsp;QQNUM(nam,nam)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><b>QSTR</b>(nam,ml)</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="a14" doxytag="nifti1_io.c::nifti_strdup"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_strdup</b> (const char *str)</td></tr>
<tr><td nowrap align=right valign=top><a name="a15" doxytag="nifti1_io.c::nifti_datatype_string"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_datatype_string</b> (int dt)</td></tr>
<tr><td nowrap align=right valign=top><a name="a16" doxytag="nifti1_io.c::nifti_is_inttype"></a>
int&nbsp;</td><td valign=bottom><b>nifti_is_inttype</b> (int dt)</td></tr>
<tr><td nowrap align=right valign=top><a name="a17" doxytag="nifti1_io.c::nifti_units_string"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_units_string</b> (int uu)</td></tr>
<tr><td nowrap align=right valign=top><a name="a18" doxytag="nifti1_io.c::nifti_xform_string"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_xform_string</b> (int xx)</td></tr>
<tr><td nowrap align=right valign=top><a name="a19" doxytag="nifti1_io.c::nifti_intent_string"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_intent_string</b> (int ii)</td></tr>
<tr><td nowrap align=right valign=top><a name="a20" doxytag="nifti1_io.c::nifti_slice_string"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_slice_string</b> (int ss)</td></tr>
<tr><td nowrap align=right valign=top><a name="a21" doxytag="nifti1_io.c::nifti_orientation_string"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_orientation_string</b> (int ii)</td></tr>
<tr><td nowrap align=right valign=top><a name="a22" doxytag="nifti1_io.c::nifti_datatype_sizes"></a>
void&nbsp;</td><td valign=bottom><b>nifti_datatype_sizes</b> (int datatype,int *nbyper,int *swapsize)</td></tr>
<tr><td nowrap align=right valign=top><a name="a23" doxytag="nifti1_io.c::quatern_to_mat44"></a>
mat44&nbsp;</td><td valign=bottom><b>quatern_to_mat44</b> (float qb,float qc,float qd,float qx,float qy,float qz,float dx,float dy,float dz,float qfac)</td></tr>
<tr><td nowrap align=right valign=top><a name="a24" doxytag="nifti1_io.c::mat44_to_quatern"></a>
void&nbsp;</td><td valign=bottom><b>mat44_to_quatern</b> (mat44 R,float *qb,float *qc,float *qd,float *qx,float *qy,float *qz,float *dx,float *dy,float *dz,float *qfac)</td></tr>
<tr><td nowrap align=right valign=top><a name="a25" doxytag="nifti1_io.c::mat44_inverse"></a>
mat44&nbsp;</td><td valign=bottom><b>mat44_inverse</b> (mat44 R)</td></tr>
<tr><td nowrap align=right valign=top>mat44&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a26">make_orthog_mat44</a> (float r11,float r12,float r13,float r21,float r22,float r23,float r31,float r32,float r33)</td></tr>
<tr><td nowrap align=right valign=top><a name="a27" doxytag="nifti1_io.c::mat33_inverse"></a>
mat33&nbsp;</td><td valign=bottom><b>mat33_inverse</b> (mat33 R)</td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a28">mat33_determ</a> (mat33 R)</td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a29">mat33_rownorm</a> (mat33 A)</td></tr>
<tr><td nowrap align=right valign=top><a name="a30" doxytag="nifti1_io.c::mat33_colnorm"></a>
float&nbsp;</td><td valign=bottom><b>mat33_colnorm</b> (mat33 A)</td></tr>
<tr><td nowrap align=right valign=top><a name="a31" doxytag="nifti1_io.c::mat33_mul"></a>
mat33&nbsp;</td><td valign=bottom><b>mat33_mul</b> (mat33 A,mat33 B)</td></tr>
<tr><td nowrap align=right valign=top><a name="a32" doxytag="nifti1_io.c::mat33_polar"></a>
mat33&nbsp;</td><td valign=bottom><b>mat33_polar</b> (mat33 A)</td></tr>
<tr><td nowrap align=right valign=top><a name="a33" doxytag="nifti1_io.c::mat44_to_orientation"></a>
void&nbsp;</td><td valign=bottom><b>mat44_to_orientation</b> (mat44 R,int *icod,int *jcod,int *kcod)</td></tr>
<tr><td nowrap align=right valign=top><a name="a34" doxytag="nifti1_io.c::swap_2bytes"></a>
void&nbsp;</td><td valign=bottom><b>swap_2bytes</b> (int n,void *ar)</td></tr>
<tr><td nowrap align=right valign=top><a name="a35" doxytag="nifti1_io.c::swap_4bytes"></a>
void&nbsp;</td><td valign=bottom><b>swap_4bytes</b> (int n,void *ar)</td></tr>
<tr><td nowrap align=right valign=top><a name="a36" doxytag="nifti1_io.c::swap_8bytes"></a>
void&nbsp;</td><td valign=bottom><b>swap_8bytes</b> (int n,void *ar)</td></tr>
<tr><td nowrap align=right valign=top><a name="a37" doxytag="nifti1_io.c::swap_16bytes"></a>
void&nbsp;</td><td valign=bottom><b>swap_16bytes</b> (int n,void *ar)</td></tr>
<tr><td nowrap align=right valign=top><a name="a38" doxytag="nifti1_io.c::swap_Nbytes"></a>
void&nbsp;</td><td valign=bottom><b>swap_Nbytes</b> (int n,int siz,void *ar)</td></tr>
<tr><td nowrap align=right valign=top><a name="a39" doxytag="nifti1_io.c::swap_nifti_header"></a>
void&nbsp;</td><td valign=bottom><b>swap_nifti_header</b> (struct <a class="el" href="struct_nifti_1_header.html">nifti_1_header</a> *h,int is_nifti)</td></tr>
<tr><td nowrap align=right valign=top><a name="a40" doxytag="nifti1_io.c::get_filesize"></a>
unsigned int&nbsp;</td><td valign=bottom><b>get_filesize</b> (char *pathname)</td></tr>
<tr><td nowrap align=right valign=top><a name="a41" doxytag="nifti1_io.c::nifti_get_volsize"></a>
size_t&nbsp;</td><td valign=bottom><b>nifti_get_volsize</b> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top><a name="a42" doxytag="nifti1_io.c::nifti_fileexists"></a>
int&nbsp;</td><td valign=bottom><b>nifti_fileexists</b> (const char *fname)</td></tr>
<tr><td nowrap align=right valign=top><a name="a43" doxytag="nifti1_io.c::nifti_validfilename"></a>
int&nbsp;</td><td valign=bottom><b>nifti_validfilename</b> (const char *fname)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a44">nifti_is_gzfile</a> (const char *fname)</td></tr>
<tr><td nowrap align=right valign=top><a name="a45" doxytag="nifti1_io.c::nifti_makebasename"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_makebasename</b> (const char *fname)</td></tr>
<tr><td nowrap align=right valign=top><a name="a46" doxytag="nifti1_io.c::nifti_findhdrname"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_findhdrname</b> (const char *fname)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a47">nifti_findimgname</a> (const char *fname,const int nifti_type)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a48">is_nifti_file</a> (char *hname)</td></tr>
<tr><td nowrap align=right valign=top><a name="a49" doxytag="nifti1_io.c::nifti_convert_nhdr2nim"></a>
<a class="el" href="struct_nifti_image.html">nifti_image</a>*&nbsp;</td><td valign=bottom><b>nifti_convert_nhdr2nim</b> (struct <a class="el" href="struct_nifti_1_header.html">nifti_1_header</a> nhdr,const char *fname)</td></tr>
<tr><td nowrap align=right valign=top>znzFile&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a50">nifti_image_open</a> (const char *hname,const char *opts,<a class="el" href="struct_nifti_image.html">nifti_image</a> **nim)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Read in NIFTI-1 or ANALYZE-7.5 file (pair) header information into a <a class="el" href="struct_nifti_image.html">nifti_image</a> struct.</em> <a href="#a50">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="struct_nifti_image.html">nifti_image</a>*&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a51">nifti_image_read</a> (const char *hname,int read_data)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Read a nifti header and optionally the data, creating a <a class="el" href="struct_nifti_image.html">nifti_image</a>.</em> <a href="#a51">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a52">nifti_image_load</a> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Load the image blob into a previously initialized <a class="el" href="struct_nifti_image.html">nifti_image</a>.</em> <a href="#a52">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a53" doxytag="nifti1_io.c::nifti_read_buffer"></a>
size_t&nbsp;</td><td valign=bottom><b>nifti_read_buffer</b> (znzFile fp,void *dataptr,size_t ntot,const <a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a54">nifti_image_unload</a> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top><a name="a55" doxytag="nifti1_io.c::nifti_image_free"></a>
void&nbsp;</td><td valign=bottom><b>nifti_image_free</b> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top><a name="a56" doxytag="nifti1_io.c::nifti_image_infodump"></a>
void&nbsp;</td><td valign=bottom><b>nifti_image_infodump</b> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top>size_t&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a57">nifti_write_buffer</a> (znzFile fp,const void *buffer,size_t numbytes)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Write all image data to disk. No byte swapping.</em> <a href="#a57">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a58" doxytag="nifti1_io.c::nifti_write_all_data"></a>
void&nbsp;</td><td valign=bottom><b>nifti_write_all_data</b> (znzFile fp,<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="struct_nifti_image.html">nifti_image</a>*&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a59">nifti_simple_init_nim</a> ()</td></tr>
<tr><td nowrap align=right valign=top>struct <a class="el" href="struct_nifti_1_header.html">nifti_1_header</a>&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a60">nifti_convert_nim2nhdr</a> (const <a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a61">nifti_set_iname_offset</a> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top><a name="a62" doxytag="nifti1_io.c::nifti_image_write_hdr_img2"></a>
znzFile&nbsp;</td><td valign=bottom><b>nifti_image_write_hdr_img2</b> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim,int write_data,char *opts,znzFile *imgfile)</td></tr>
<tr><td nowrap align=right valign=top>znzFile&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a63">nifti_image_write_hdr_img</a> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim,int write_data,char *opts)</td></tr>
<tr><td nowrap align=right valign=top><a name="a64" doxytag="nifti1_io.c::nifti_image_write"></a>
void&nbsp;</td><td valign=bottom><b>nifti_image_write</b> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top><a name="a65" doxytag="nifti1_io.c::nifti_copy_nim_info"></a>
<a class="el" href="struct_nifti_image.html">nifti_image</a>*&nbsp;</td><td valign=bottom><b>nifti_copy_nim_info</b> (const <a class="el" href="struct_nifti_image.html">nifti_image</a> *src)</td></tr>
<tr><td nowrap align=right valign=top><a name="a66" doxytag="nifti1_io.c::unescape_string"></a>
int&nbsp;</td><td valign=bottom><b>unescape_string</b> (char *str)</td></tr>
<tr><td nowrap align=right valign=top><a name="a67" doxytag="nifti1_io.c::escapize_string"></a>
char*&nbsp;</td><td valign=bottom><b>escapize_string</b> (char *str)</td></tr>
<tr><td nowrap align=right valign=top><a name="a68" doxytag="nifti1_io.c::nifti_image_to_ascii"></a>
char*&nbsp;</td><td valign=bottom><b>nifti_image_to_ascii</b> (<a class="el" href="struct_nifti_image.html">nifti_image</a> *nim)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="nifti1_io_c.html#a69">short_order</a> (void)</td></tr>
<tr><td nowrap align=right valign=top><a name="a70" doxytag="nifti1_io.c::nifti_image_from_ascii"></a>
<a class="el" href="struct_nifti_image.html">nifti_image</a>*&nbsp;</td><td valign=bottom><b>nifti_image_from_ascii</b> (char *str)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Main collection of nifti1 i/o routines, written by Bob Cox, SSCC NIMH; revised by Mark Jenkinson, FMRIB.
<p>

<p>
<hr><h2>Define Documentation</h2>
<a name="a8" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_image_write_hdr_img: %s\n"</font>,(msg)) ;  \
     <font class="keywordflow">return</font> fp ; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a7" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_image_write: %s\n"</font>,(msg)) ;  \
     <font class="keywordflow">return</font> ; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a6" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_write_buffer: %s\n"</font>,(msg)) ;  \
     <font class="keywordflow">return</font> 0; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a5" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_read_buffer: %s\n"</font>,(msg)) ;  \
     <font class="keywordflow">return</font> 0; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a4" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_image_load: %s\n"</font>,(msg)) ;  \
     <font class="keywordflow">return</font> ; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a3" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_image_read(%s): %s\n"</font>,  \
             (hname != NULL) ? hname : <font class="stringliteral">"(null)"</font> , (msg) ) ;  \
     <font class="keywordflow">return</font> NULL ; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a2" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_image_open(%s): %s\n"</font>,  \
             (hname != NULL) ? hname : <font class="stringliteral">"(null)"</font> , (msg) ) ;  \
     <font class="keywordflow">return</font> fptr ; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a1" doxytag="nifti1_io.c::ERREX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define ERREX(
          </b></td>
          <td valign="bottom"><b>
msg&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre>\
 <font class="keywordflow">do</font>{ fprintf(stderr,<font class="stringliteral">"** ERROR: nifti_convert_nhdr_to_nim: %s\n"</font>, (msg) ) ;  \
     <font class="keywordflow">return</font> NULL ; } <font class="keywordflow">while</font>(0)</div></pre>will read image data from file 'iname' starting at offset 'ioff' *     </td>
  </tr>
</table>
<a name="a13" doxytag="nifti1_io.c::QSTR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define QSTR(
          </b></td>
          <td valign="bottom"><b>
nam, ml&nbsp;)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initializer:</b><div class="fragment"><pre><font class="keywordflow">if</font>( strcmp(lhs,#nam) == 0 )                           \
                       strncpy(nim-&gt;nam,rhs,ml), nim-&gt;intent_name[ml]=<font class="charliteral">'\0'</font></div></pre>    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a48" doxytag="nifti1_io.c::is_nifti_file"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int is_nifti_file (
          </b></td>
          <td valign="bottom"><b>
char * <em>hname</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
if using compression libraries, .gz files are looked for first *     </td>
  </tr>
</table>
<a name="a26" doxytag="nifti1_io.c::make_orthog_mat44"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
mat44 make_orthog_mat44 (
          </b></td>
          <td valign="bottom"><b>
float <em>r11</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r12</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r13</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r21</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r22</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r23</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r31</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r32</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
float <em>r33</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
INPUT MATRIX IS: *     </td>
  </tr>
</table>
<a name="a28" doxytag="nifti1_io.c::mat33_determ"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
float mat33_determ (
          </b></td>
          <td valign="bottom"><b>
mat33 <em>R</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
INPUT MATRIX: *     </td>
  </tr>
</table>
<a name="a29" doxytag="nifti1_io.c::mat33_rownorm"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
float mat33_rownorm (
          </b></td>
          <td valign="bottom"><b>
mat33 <em>A</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
INPUT MATRIX: *     </td>
  </tr>
</table>
<a name="a60" doxytag="nifti1_io.c::nifti_convert_nim2nhdr"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
struct <a class="el" href="struct_nifti_1_header.html">nifti_1_header</a> nifti_convert_nim2nhdr (
          </b></td>
          <td valign="bottom"><b>
const <a class="el" href="struct_nifti_image.html">nifti_image</a> * <em>nim</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
load the ANALYZE-7.5 generic parts of the header struct *     </td>
  </tr>
</table>
<a name="a47" doxytag="nifti1_io.c::nifti_findimgname"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * nifti_findimgname (
          </b></td>
          <td valign="bottom"><b>
const char * <em>fname</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const int <em>nifti_type</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
if it gets to here then nothing has been found -&gt; failure! *     </td>
  </tr>
</table>
<a name="a52" doxytag="nifti1_io.c::nifti_image_load"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void nifti_image_load (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="struct_nifti_image.html">nifti_image</a> * <em>nim</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load the image blob into a previously initialized <a class="el" href="struct_nifti_image.html">nifti_image</a>.
<p>
The data buffer will be byteswapped if necessary. <br>
 The data buffer will not be scaled. <br>
 The data buffer is allocated with calloc().<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>nim</em>
&nbsp;</td><td>
 Pointer to a <a class="el" href="struct_nifti_image.html">nifti_image</a>, initialized, eg with nifti_image_read. </td></tr>
</table>
</dl><dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="nifti1_io_c.html#a51">nifti_image_read</a> </dl>    </td>
  </tr>
</table>
<a name="a50" doxytag="nifti1_io.c::nifti_image_open"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
znzFile nifti_image_open (
          </b></td>
          <td valign="bottom"><b>
const char * <em>hname</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const char * <em>opts</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="struct_nifti_image.html">nifti_image</a> ** <em>nim</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read in NIFTI-1 or ANALYZE-7.5 file (pair) header information into a <a class="el" href="struct_nifti_image.html">nifti_image</a> struct.
<p>
<br>
The image data is not read, it will have to be read later (e.g., using the <a class="el" href="nifti1_io_c.html#a52">nifti_image_load</a>() function). <br>
The image data will be stored in whatever data format the input data is; no scaling will be applied. <br>
 DT_BINARY data is not supported! <br>
 <a class="el" href="nifti1_io_c.html">nifti_image_free</a>() can be used to delete the returned struct, when you are done with it.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>hname</em>
&nbsp;</td><td>
 filename of dataset .hdr or .nii file. </td></tr>
<tr><td valign=top><em>opts</em>
&nbsp;</td><td>
 </td></tr>
<tr><td valign=top><em>nim</em>
&nbsp;</td><td>
 pointer to pointer to <a class="el" href="struct_nifti_image.html">nifti_image</a> struct. Note that this routine allocates the <a class="el" href="struct_nifti_image.html">nifti_image</a> struct, calling routine just needs the ptr to ptr. </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 file pointer (gzippable) to the file with the image data, ready for reading. <br>
NULL if something fails badly. </dl><dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="nifti1_io_c.html#a52">nifti_image_load</a> nifti_image_free </dl>    </td>
  </tr>
</table>
<a name="a51" doxytag="nifti1_io.c::nifti_image_read"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="struct_nifti_image.html">nifti_image</a> * nifti_image_read (
          </b></td>
          <td valign="bottom"><b>
const char * <em>hname</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>read_data</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read a nifti header and optionally the data, creating a <a class="el" href="struct_nifti_image.html">nifti_image</a>.
<p>
The data buffer will be byteswapped if necessary. <br>
 The data buffer will not be scaled. <br>
 The data buffer is allocated with calloc().<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>hname</em>
&nbsp;</td><td>
 filename of the nifti dataset </td></tr>
<tr><td valign=top><em>read_data</em>
&nbsp;</td><td>
 Flag, true=read data blob, false=don't read blob. </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 A pointer to the <a class="el" href="struct_nifti_image.html">nifti_image</a> data structure. </dl>    </td>
  </tr>
</table>
<a name="a54" doxytag="nifti1_io.c::nifti_image_unload"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void nifti_image_unload (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="struct_nifti_image.html">nifti_image</a> * <em>nim</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
byte swap array if needed *     </td>
  </tr>
</table>
<a name="a63" doxytag="nifti1_io.c::nifti_image_write_hdr_img"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
znzFile nifti_image_write_hdr_img (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="struct_nifti_image.html">nifti_image</a> * <em>nim</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>write_data</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>opts</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
close the file if requested *     </td>
  </tr>
</table>
<a name="a44" doxytag="nifti1_io.c::nifti_is_gzfile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int nifti_is_gzfile (
          </b></td>
          <td valign="bottom"><b>
const char * <em>fname</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
check input file(s) for sanity *     </td>
  </tr>
</table>
<a name="a61" doxytag="nifti1_io.c::nifti_set_iname_offset"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void nifti_set_iname_offset (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="struct_nifti_image.html">nifti_image</a> * <em>nim</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load NIFTI specific stuff into the header *     </td>
  </tr>
</table>
<a name="a59" doxytag="nifti1_io.c::nifti_simple_init_nim"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="struct_nifti_image.html">nifti_image</a> * nifti_simple_init_nim (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write all the image data at once (no swapping here) *     </td>
  </tr>
</table>
<a name="a57" doxytag="nifti1_io.c::nifti_write_buffer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
size_t nifti_write_buffer (
          </b></td>
          <td valign="bottom"><b>
znzFile <em>fp</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const void * <em>buffer</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
size_t <em>numbytes</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write all image data to disk. No byte swapping.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>fp</em>
&nbsp;</td><td>
 File pointer (from znzopen) to gzippable nifti datafile </td></tr>
<tr><td valign=top><em>buffer</em>
&nbsp;</td><td>
 data buffer to be written </td></tr>
<tr><td valign=top><em>numbytes</em>
&nbsp;</td><td>
 number of bytes in buffer to write </td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 number of bytes successfully written. </dl><dl compact><dt>
<b>See also: </b><dd>
 </dl>    </td>
  </tr>
</table>
<a name="a69" doxytag="nifti1_io.c::short_order"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int short_order (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Strings that we don't control (filenames, etc.) that might contain "weird" characters (like quotes) are "escaped":<ul>
<li>A few special characters are replaced by XML-style escapes, using the function <a class="el" href="nifti1_io_c.html">escapize_string</a>().<li>On input, function <a class="el" href="nifti1_io_c.html">unescape_string</a>() reverses this process.<li>The result is that the NIFTI ASCII-format header is XML-compliant. * </ul>
    </td>
  </tr>
</table>
<hr><address><small>Generated at Mon Dec 13 17:43:44 2004 for nifti1_io by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.4 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
